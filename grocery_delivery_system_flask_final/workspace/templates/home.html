{% extends 'base.html' %}

{% block style_block %}
<style>
    .search-container {
        display: flex;
        align-items: center;
        background: white;
        border-radius: 50px;
        padding: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        transition: box-shadow 0.3s ease-in-out;
        width: 500px;
    }

    .search-input {
        border: none;
        outline: none;
        flex: 1;
        padding: 10px 15px;
        font-size: 16px;
        border-radius: 50px;
        transition: border 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
    }

    .search-container:hover {
        border: 2px solid transparent;
        box-shadow: 0 0 8px rgba(255, 165, 0, 0.7), 0 0 15px rgba(255, 99, 71, 0.6);
    }

    .search-button {
        background: black;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 50px;
        font-size: 16px;
        cursor: pointer;
        transition: background 0.3s ease-in-out, transform 0.2s ease-in-out;
    }

    .search-button:hover {
        background: linear-gradient(45deg, #ff9800, #e91e63);
        transform: scale(1.05);
    }

    /* bottom nav */
    .chevron {
        transition: transform 0.3s ease;
    }

    .chevron.active {
        transform: rotate(180deg);
    }

    /* .header-icon {
        padding: 5px;
        border-radius: 10px;
        font-size: large;
    }

    .bottomnav-links {
        width: 100px;
        height: 40px;
        display: flex;
        justify-content: center;
        align-items: center;
        text-decoration: none;
        border: 2px solid black;
        border-radius: 10px;
        color: white;
        background-color: #752914;
        font-family: eb;
        font-weight: bolder;
        font-size: larger;
    } */

    .bottomnav {
        background: #f8f8f8;
        /* Soft off-white background */
        border-radius: 12px;
        padding: 10px 20px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.05);
        margin-top: -30px;
    }

    .bottomnav-links {
        font-size: x-large;
        font-weight: 500;
        color: #222;
        text-decoration: none;
        transition: color 0.3s ease-in-out, transform 0.2s ease-in-out;
    }

    .bottomnav-links:hover {
        color: #4caf50;
        transform: translateY(-2px);
    }

    .header-icon {
        text-align: center;
        font-size: 14px;
        cursor: pointer;
        color: #333;
        transition: background 0.3s ease, color 0.3s ease, transform 0.3s ease;
        padding: 10px;
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.6);
    }

    /* üü¢ Home Hover */
    .bottomnav a:nth-child(1):hover {
        /* background: #d4edda; */
        /* Soft Green */
        color: #2e7d32;
    }

    /* üîµ Contact Us Hover */
    .bottomnav a:nth-child(2):hover {
        /* background: #d0e3f9; */
        /* Soft Blue */
        color: #1976d2;
    }

    /* üü† Vendors Hover */
    .bottomnav a:nth-child(3):hover {
        /* background: #ffe0b2; */
        /* Soft Orange */
        color: #e65100;
    }

    /* üî¥ Deals & Sales Hover */
    .header-icon:nth-of-type(1):hover {
        background: #f8bbd0;
        /* Soft Pink */
        color: #d81b60;
    }

    /* üü£ Dairy Hover */
    .header-icon:nth-of-type(2):hover {
        background: #e1bee7;
        /* Soft Purple */
        color: #8e24aa;
    }

    /* üü§ Meat & Seafood Hover */
    .header-icon:nth-of-type(3):hover {
        background: #d7ccc8;
        /* Soft Brown */
        color: #5d4037;
    }

    /* üçû Bakery Hover */
    .header-icon:nth-of-type(4):hover {
        background: #fff3e0;
        /* Soft Beige */
        color: #ef6c00;
    }

    /* üçè Produce Hover */
    .header-icon:nth-of-type(5):hover {
        background: #e8f5e9;
        /* Soft Pastel Green */
        color: #388e3c;
    }

    /* üç∑ Wine & Spirits Hover */
    .header-icon:nth-of-type(6):hover {
        background: #ede7f6;
        /* Soft Lavender */
        color: #512da8;
    }

    /* üåû Seasonal Hover */
    .header-icon:nth-of-type(7):hover {
        background: #fff9c4;
        /* background: black; */
        /* Soft Yellow */
        color: #fbc02d;
    }
    .header-icon:nth-of-type(8):hover {
        background: #ede7f6;
        /* Soft Lavender */
        color: #512da8;
    }
    .header-icon:nth-of-type(9):hover {
        background: #e8f5e9;
        /* Soft Pastel Green */
        color: #388e3c;
    }

    /* Icons should also change color on hover */
    .header-icon:hover i {
        color: inherit;
    }
</style>

<style>
    .container1 {
        max-width: 1400px;
        margin: 40px auto;
        padding: 0 20px;
    }

    .container1 h1 {
        font-size: 2.5rem;
        color: #1a1a1a;
        margin-bottom: 40px;
        text-align: center;
    }

    /* Base store section styles */
    .store-section {
        background-color: white;
        border-radius: 24px;
        padding: 30px;
        margin-bottom: 40px;
        box-shadow: 12px 14px 18px rgba(0, 0, 0, 0.05);
        transition: all 0.3s ease;
        background-color: #f9f9f8;
    }

    /* Store-specific color schemes */
    .store-section:nth-child(3n+1) {
        /* Fresh produce theme - Green */
        --store-color: #22c55e;
        --store-light: #dcfce7;
        --store-dark: #15803d;
    }

    .store-section:nth-child(3n+2) {
        /* Bakery theme - Orange */
        --store-color: #f97316;
        --store-light: #ffedd5;
        --store-dark: #c2410c;
    }

    .store-section:nth-child(3n+3) {
        /* Dairy theme - Blue */
        --store-color: #3b82f6;
        --store-light: #dbeafe;
        --store-dark: #1d4ed8;
    }

    .store-section:hover {
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
        border: 1px solid var(--store-color);
    }

    .store-section h2 {
        font-size: 1.8rem;
        color: #1a1a1a;
        margin-bottom: 10px;
        transition: color 0.3s ease;
    }

    .store-section:hover h2 {
        color: var(--store-color);
    }

    .store-info {
        display: flex;
        gap: 20px;
        margin-bottom: 20px;
        color: #666;
    }

    .store-badge {
        display: inline-block;
        padding: 6px 12px;
        background-color: #f8f8f8;
        color: #666;
        border-radius: 20px;
        font-size: 0.9rem;
        transition: all 0.3s ease;
    }

    .store-section:hover .store-badge {
        background-color: var(--store-light);
        color: var(--store-dark);
    }

    .view-all {
        color: #1a1a1a;
        text-decoration: none;
        font-weight: 500;
        transition: all 0.3s ease;
        padding: 8px 16px;
        border-radius: 8px;
    }

    .view-all:hover {
        color: var(--store-color);
        background-color: var(--store-light);
    }

    .products {
        display: flex;
        flex-wrap: wrap;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 25px;
        margin-top: 25px;
        height: 450px;
    }

    .product-card {
        height: max-content;
        background-color: white;
        border-radius: 16px;
        overflow: hidden;
        transition: all 0.3s ease;
        border: 1px solid black;
    }

    .product-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        border-color: var(--store-color);
    }

    .product-image {
        width: 100%;
        height: 200px;
        object-fit: cover;
        transition: transform 0.3s ease;
    }

    .product-card:hover .product-image {
        transform: scale(1.05);
    }

    .product-info {
        padding: 20px;
        background-color: white;
        transition: background-color 0.3s ease;
    }

    .product-card:hover .product-info {
        background-color: var(--store-light);
    }

    .product-info h3 {
        font-size: 1.2rem;
        color: #1a1a1a;
        margin-bottom: 10px;
        transition: color 0.3s ease;
    }

    .product-card:hover .product-info h3 {
        color: var(--store-dark);
    }

    .product-price {
        font-size: 1.1rem;
        color: #1a1a1a;
        font-weight: 600;
        transition: color 0.3s ease;
    }

    .product-card:hover .product-price {
        color: var(--store-color);
    }

    .add-to-cart {
        display: inline-block;
        padding: 8px 16px;
        background-color: #1a1a1a;
        color: white;
        border-radius: 8px;
        text-decoration: none;
        font-size: 0.9rem;
        margin-top: 10px;
        transition: all 0.3s ease;
        border: 1px solid transparent;
    }

    .add-to-cart:hover {
        background-color: var(--store-color);
        transform: translateY(-2px);
    }

    .add-to-cart:active {
        background-color: var(--store-dark);
        transform: translateY(0);
    }

    @media (max-width: 768px) {
        .container1 {
            padding: 0 15px;
        }

        .products {
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }
    }

    /* Stock Indicators with Hover Effects */
    .stock-low,
    .stock-medium,
    .stock-high {
        position: relative;
        padding-left: 1.2rem;
        color: #666;
    }

    .stock-low:before,
    .stock-medium:before,
    .stock-high:before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 8px;
        height: 8px;
        border-radius: 50%;
        transition: all 0.3s ease;
    }

    .stock-low:before {
        background: #FFEBEE;
    }

    .stock-medium:before {
        background: #FFF3E0;
    }

    .stock-high:before {
        background: #E8F5E9;
    }

    .stock-low:hover:before {
        background: #C62828;
    }

    .stock-medium:hover:before {
        background: #EF6C00;
    }

    .stock-high:hover:before {
        background: #2E7D32;
    }

    .stock-low:hover {
        color: #C62828;
    }

    .stock-medium:hover {
        color: #EF6C00;
    }

    .stock-high:hover {
        color: #2E7D32;
    }
</style>
{% endblock %}


{% block home_remove_block %}

{% endblock %}



{% block nav_search_block %}


<div>
    <form action="{{ url_for('search' ) }}" method="GET" class="search-container">
        <input type="text" class="search-input" name="search_input" placeholder="Search for fresh produce...">
        <button class="search-button">
            <i class="fas fa-search"></i>
        </button>
    </form>
</div>


{% endblock %}

{% block admin_dashboard_block %}

{% if current_user.store and current_user.store.isapproved %}
<a href="{{ url_for('manage_products') }}"><span class="navlink">Manage Store</span></a>
{% endif %}

{% if current_user.role == "admin" %}
<a href="{{ url_for('admin_dashboard' ) }}" class="navlink ">Admin Dashboard</a>
{% endif %}
{% endblock %}

{% block location_block %}
<a href="{{ url_for('apply_store' ) }}" class="icon-anchor">
    <div class="social-icon"><i class="fa-solid fa-briefcase fa-2x"></i></div>
</a>
{% endblock %}


{% block bottom_nav_block %}
<div class="bottomnav container-fluid d-flex align-items-center justify-content-md-center gap-4 py-2">

    <a href="#" class="bottomnav-links clickable-anchor">Home</a>
    <!-- <a href="" class="bottomnav-links clickable-anchor">Contact Us</a> -->
    <a href="" class="bottomnav-links clickable-anchor">Vendors</a>




    <a href="{{ url_for('search', search_input='fruits' ) }}" style="text-decoration: none;" class="header-icon">
        <div class="deals-and-sales-heading ms-5" id="toggleButton" data-toggle-id="chevronIcon">
            <i class="fa-solid fa-tag fa-2x  ms-4"></i> <br>
            Deals & Sales <i class="fa-solid fa-angle-up chevron" id="chevronIcon"></i>
        </div>
    </a>
    <a href="{{ url_for('search', search_input='dairy' ) }}" style="text-decoration: none;" class="header-icon">
        <div class="dairy-products-heading" id="toggleButton1" data-toggle-id="chevronIcon1">
            <i class="fa-solid fa-cow fa-2x "></i> <br>
            Dairy <i class="fa-solid fa-angle-up chevron" id="chevronIcon1"></i>
        </div>
    </a>
    <a href="{{ url_for('search', search_input='meat and seafood' ) }}" style="text-decoration: none;" class="header-icon">
        <div class="meat-seafood-heading" id="toggleButton2" data-toggle-id="chevronIcon2">
            <i class="fa-solid fa-drumstick-bite fa-2x align-center  ms-5"></i> <br>
            Meat & Seafood <i class="fa-solid fa-angle-up chevron" id="chevronIcon2"></i>
        </div>
    </a>
    <a href="{{ url_for('search', search_input='bakery' ) }}" style="text-decoration: none;" class="header-icon">
        <div class="bakery-heading" id="toggleButton3" data-toggle-id="chevronIcon3">
            <i class="fa-solid fa-bread-slice fa-2x  ms-2"></i> <br>
            Bakery <i class="fa-solid fa-angle-up chevron" id="chevronIcon3"></i>
        </div>

    </a>
    <a href="{{ url_for('search', search_input='fruits' ) }}" style="text-decoration: none;" class="header-icon">
        <div class="fruit-heading" id="toggleButton4" data-toggle-id="chevronIcon4">
            <i class="fa-solid fa-apple-whole fa-2x  ms-3"></i> <br>
            Produce <i class="fa-solid fa-angle-up chevron" id="chevronIcon4"></i>
        </div>

    </a>
    <a href="{{ url_for('search', search_input='wine and spirits' ) }}" style="text-decoration: none;" class="header-icon">
        <div class="wine-heading" id="toggleButton5" data-toggle-id="chevronIcon5">
            <i class="fa-solid fa-wine-bottle fa-2x  ms-5"></i> <br>
            Wine & Spirits <i class="fa-solid fa-angle-up chevron" id="chevronIcon5"></i>
        </div>
    </a>
    <a href="{{ url_for('search', search_input='seasonal' ) }}" style="text-decoration: none;" class="header-icon">
        <div class="seasonal-heading" id="toggleButton6" data-toggle-id="chevronIcon6">
            <i class="fa-solid fa-umbrella fa-2x ms-3 "></i> <br>
            Seasonal <i class="fa-solid fa-angle-up chevron" id="chevronIcon6"></i>
        </div>
    </a>











</div>
{% endblock %}


{% block main_block1 %}


{% if results %}
<h2 style="margin: 20px;">
    <pre>Search Results for "{{ query }}"                                            <a href="{{ url_for('home' ) }}" style="text-decoration: none;color: black;"><i class="fa-solid fa-xmark"></i></a></pre>
</h2>

<div class="results" style="display: flex;flex-wrap: wrap;gap: 10px;">
    {% for product in results %}
    <a href="{{ url_for('product' , product_id=product.id) }}" style="text-decoration: none;">
        <div class="product-card" style="width: 270px;">
            <img src="{{ product.image}}" alt="{{ product.productName }}" class="product-img" height="180px"
                width="270px">
            <div class="product-info">
                <h3><strong>{{ product.productName }}</strong></h3>
                <h3 class="store-badge"> {{product.category}} </h3>
                <h3 class="
                        {% if product.quantity <= 5 %} stock-low 
                        {% elif product.quantity <= 15 %} stock-medium 
                        {% else %} stock-high 
                        {% endif %}">
                    quantity: {{ product.quantity }}
                </h3>
                <div class="product-price">${{ product.price }}</div>
                <form action="{{ url_for('add_to_cart', product_id=product.id) }}" method="POST">
                    <input type="hidden" name="quantity" value="1">
                    <button type="submit" class="add-to-cart" onmouseover="this.style.backgroundColor = 'green'"
                        onmouseout="this.style.backgroundColor = 'black'">Add to Cart</button>
                </form>
            </div>
        </div>
    </a>
    {% endfor %}
</div>
{% else %}
<!-- <a href="{{ url_for('home' ) }}" style="text-decoration: none;color: black;"><i class="fa-solid fa-xmark"></i></a> -->
{% endif %}

<div class="container1">
    <h1>Featured Stores</h1>
    {% for store in stores %}
    <div class="store-section">
        <div class="store-header">
            <div>
                <h2>{{ store.storeName }}</h2>
                <div class="store-info">
                    <p>{{ store.owner.username }}</p>
                    <span class="store-badge">{{ store.category }}</span>
                </div>
            </div>
            <a href="#" class="view-all">View All Products</a>
        </div>

        <div class="products" style="height: max-content;">
            {% for product in store.products %}
            <a href="{{ url_for('product' , product_id=product.id) }}" style="text-decoration: none;">
                <div class="product-card" style="width: 270px;">
                    <img src="{{ product.image}}" alt="{{ product.productName }}" class="product-img" height="180px"
                        width="270px">
                    <div class="product-info">
                        <h3><strong>{{ product.productName }}</strong></h3>
                        <h3 class="store-badge"> {{product.category}} </h3>
                        <h3 class="
                                {% if product.quantity <= 5 %} stock-low 
                                {% elif product.quantity <= 15 %} stock-medium 
                                {% else %} stock-high 
                                {% endif %}">
                            quantity: {{ product.quantity }}
                        </h3>
                        <div class="product-price">${{ product.price }}</div>
                        <form action="{{ url_for('add_to_cart', product_id=product.id) }}" method="POST">
                            <input type="hidden" name="quantity" value="1"> 
                            <button type="submit" class="add-to-cart">Add to Cart</button>
                        </form>
                    </div>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}



{% block script_block %}
<script>

</script>
{% endblock %}